function popupGoBack() {
    const iframe = document.getElementById('content-iframe');
    iframe.contentWindow.history.back();
}

function popupGoForward() {
    const iframe = document.getElementById('content-iframe');
    iframe.contentWindow.history.forward();
}

function popupReload() {
    var frame = document.getElementById("content-iframe");
    frame.contentWindow.location.reload();
}


function popupToggleFullscreen() {
    const iframe = document.getElementById('content-iframe');
    if (!document.fullscreenElement) {
        iframe.requestFullscreen().catch((err) => {
            alert(`Error attempting to enable fullscreen mode: ${err.message} (${err.name})`);
        });
    } else {
        document.exitFullscreen();
    }
}

document.getElementById('show-interface').addEventListener('click', function () {
    document.getElementById('popup').style.display = 'block';
});

document.getElementById('close-popup').addEventListener('click', function () {
    document.getElementById('popup').style.display = 'none';
});

function loadCustomURL() {
    const customURL = document.getElementById('custom-url').value;
    const iframe = document.getElementById('content-iframe');
    if (customURL) {
        iframe.src = customURL;
    } else {
        alert("Please enter a valid URL.");
    }
}

document.getElementById('preset-links').addEventListener('change', function () {
    const iframe = document.getElementById('content-iframe');
    iframe.src = this.value;
});

const games = [
{
        "name": "Discord Chat",
        "image": "https://github.com/GalacticNetwork/jordansmathwork-v6/blob/main/assets/images/app/discord.jpg?raw=true",
        "description": "Chat with friends with the official JMW chat!",
        "path": "dsc/index.html"
    },
    {
        "name": "Suggestions",
        "image": "https://github.com/GalacticNetwork/jordansmathwork-v6/blob/main/assets/images/forms2.png?raw=true",
        "description": "Send suggestions to the team of galactic network!",
        "path": "suggestions/index.html"
    },
    {
        "name": "1",
        "image": "https://3kh0-lite-907.pages.dev/projects/1/meta/apple-touch-icon.png",
        "description": "Exciting space adventure.",
        "path": "1/index.html"
    },
    {
        "name": "1v1.lol",
        "image": "https://github.com/WhoIsEv/relivedassets/blob/main/1v1lol/splash.png?raw=true",
        "description": "TPS game, like fortnite",
        "path": "1v1-lol/index.html"
    },
    {
        "name": "10 Minutes till dawn",
        "image": "https://github.com/GalacticNetwork/3kh0-assets/blob/main/10-minutes-till-dawn/splash.png?raw=true",
        "description": "Demo version of shooting game.",
        "path": "10-minutes-till-dawn/index.html"
    },
    {
        "name": "2048",
        "image": "https://3kh0-lite-907.pages.dev/projects/2048/thumb.png",
        "description": "Challenging puzzle game.",
        "path": "2048/index.html"
    },
    {
        "name": "A Dance Of Fire and Ice",
        "image": "https://github.com/GalacticNetwork/3kh0-assets/blob/main/a-dance-of-fire-and-ice/splash.png?raw=true",
        "description": "A challenging rhythm game.",
        "path": "a-dance-of-fire-and-ice/index.html"
    },
    {
        "name": "Achievement Unlocked",
        "image": "https://3kh0-lite-907.pages.dev/projects/achievementunlocked/achievementunlocked.png",
        "description": "Collect achievements to win!",
        "path": "achievementunlocked/index.html"
    },
    {
        "name": "Basketball Stars",
        "image": "https://3kh0-lite-907.pages.dev/projects/basketball-stars/assets/images/basketball-stars.png",
        "description": "A NBA based game.",
        "path": "basketball-stars/index.html"
    }
];

const servers = [
    "https://learn-with.jskjsv6.workers.dev/GalacticNetwork/3kh0-assets/main/",
    "https://cdn.minnetonkamiddleschooleast.online/GalacticNetwork/3kh0-assets/main/"
];

let currentServerIndex = null;

function chooseServer(index) {
    currentServerIndex = index;
}

function loadGames() {
    const gameList = document.getElementById('game-list');
    gameList.innerHTML = '';

    games.forEach((game) => {
        const gameCard = document.createElement('div');
        gameCard.className = 'game-card';
        gameCard.innerHTML = `
            <img src="${game.image}" alt="${game.name}">
            <h4>${game.name}</h4>
        `;
        gameCard.onclick = () => loadGame(game.path);
        gameList.appendChild(gameCard);
    });
}

function loadGame(path) {
    if (currentServerIndex === null) {
        alert("Please choose a server first!");
        return;
    }

    const server = servers[currentServerIndex];
    const iframe = document.getElementById('game-iframe');
    iframe.src = server + path;

    document.getElementById('iframe-container').style.display = 'block';
    document.getElementById('fullscreen-btn').style.display = 'inline-block';
}

document.getElementById('fullscreen-btn').addEventListener('click', function () {
    const iframe = document.getElementById('game-iframe');
    if (!document.fullscreenElement) {
        iframe.requestFullscreen().catch((err) => {
            alert(`Error attempting to enable fullscreen mode: ${err.message} (${err.name})`);
        });
    } else {
        document.exitFullscreen();
    }
});

window.onload = loadGames;